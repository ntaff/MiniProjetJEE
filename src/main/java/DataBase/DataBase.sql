/**
 * Author:  Marshall
 * Created: 12 dÃ©c. 2018
 */

CREATE TABLE CUSTOMER (
	CUSTOMER_ID INTEGER NOT NULL,
	DISCOUNT_CODE CHAR(1) NOT NULL,
	ZIP VARCHAR(10) NOT NULL,
	NAME VARCHAR(30),
	ADDRESSLINE1 VARCHAR(30),
	ADDRESSLINE2 VARCHAR(30),
	CITY VARCHAR(25),
	STATE CHAR(2),
	PHONE CHAR(12),
	FAX CHAR(12),
	EMAIL VARCHAR(40),
	CREDIT_LIMIT INTEGER,
	PRIMARY KEY (CUSTOMER_ID)
);

CREATE TABLE DISCOUNT_CODE (
	DISCOUNT_CODE CHAR(1) NOT NULL,
	RATE DECIMAL(5,3) CONSTRAINT NonNegativeRate CHECK (RATE >= 0.0),
	PRIMARY KEY (DISCOUNT_CODE)
);

CREATE TABLE MANUFACTURER (
	MANUFACTURER_ID INTEGER NOT NULL,
	NAME VARCHAR(30),
	ADDRESSLINE1 VARCHAR(30),
	ADDRESSLINE2 VARCHAR(30),
	CITY VARCHAR(25),
	STATE CHAR(2),
	ZIP CHAR(10),
	PHONE VARCHAR(12),
	FAX VARCHAR(12),
	EMAIL VARCHAR(40),
	REP VARCHAR(30),
	PRIMARY KEY (MANUFACTURER_ID)
);

CREATE TABLE MICRO_MARKET (
	ZIP_CODE VARCHAR(10) NOT NULL,
	RADIUS DOUBLE,
	AREA_LENGTH DOUBLE,
	AREA_WIDTH DOUBLE,
	PRIMARY KEY (ZIP_CODE)
);

CREATE TABLE PRODUCT (
	PRODUCT_ID INTEGER NOT NULL,
	MANUFACTURER_ID INTEGER NOT NULL,
	PRODUCT_CODE CHAR(2) NOT NULL,
	PURCHASE_COST DECIMAL(12,2),
	QUANTITY_ON_HAND INTEGER,
	MARKUP DECIMAL(4,2),
	AVAILABLE VARCHAR(5),
	DESCRIPTION VARCHAR(50),
	PRIMARY KEY (PRODUCT_ID)
);

CREATE TABLE PRODUCT_CODE (
	PROD_CODE CHAR(2) NOT NULL,
	DISCOUNT_CODE CHAR(1) NOT NULL,
	DESCRIPTION VARCHAR(10),
	PRIMARY KEY (PROD_CODE)
);

CREATE TABLE PURCHASE_ORDER (
	ORDER_NUM INTEGER NOT NULL,
	CUSTOMER_ID INTEGER NOT NULL,
	PRODUCT_ID INTEGER NOT NULL,
	QUANTITY SMALLINT,
	SHIPPING_COST DECIMAL(12,2),
	SALES_DATE DATE,
	SHIPPING_DATE DATE,
	FREIGHT_COMPANY VARCHAR(30),
	PRIMARY KEY (ORDER_NUM)
);

INSERT INTO CUSTOMER(CUSTOMER_ID, DISCOUNT_CODE, ZIP, NAME, ADDRESSLINE1, ADDRESSLINE2, CITY, STATE, PHONE, FAX, EMAIL, CREDIT_LIMIT) VALUES 
(1, 'N', '95117', 'Jumbo Eagle Corp', '111 E. Las Olivas Blvd', 'Suite 51', 'Fort Lauderdale', 'FL', '305-555-0188', '305-555-0189', 'jumboeagle@example.com', 100000),
(2, 'M', '95035', 'New Enterprises', '9754 Main Street', 'P.O. Box 567', 'Miami', 'FL', '305-555-0148', '305-555-0149', 'www.new.example.com', 50000),
(25, 'M', '85638', 'Wren Computers', '8989 Red Albatross Drive', 'Suite 9897', 'Houston', 'TX', '214-555-0133', '214-555-0134', 'www.wrencomp.example.com',25000),
(3, 'L', '12347', 'Small Bill Company', '8585 South Upper Murray Drive', 'P.O. Box 456', 'Alanta', 'GA', '555-555-0175', '555-555-0176', 'www.smallbill.example.com', 90000),
(36, 'H', '94401', 'Bob Hosting Corp.', '65653 Lake Road', 'Suite 2323', 'San Mateo', 'CA', '650-555-0160', '650-555-0161', 'www.bobhostcorp.example.com', 65000);

INSERT INTO DISCOUNT_CODE(DISCOUNT_CODE, RATE) VALUES 
('H', 16.00),
('M', 11.00),
('L', 7.00),
('N', 0.00);

INSERT INTO MANUFACTURER(MANUFACTURER_ID, NAME, ADDRESSLINE1, ADDRESSLINE2, CITY, STATE, ZIP, PHONE, FAX, EMAIL, REP) VALUES 
(19985678, 'Happy End Searching', '5 81st Street', 'Suite 100', 'Mountain View', 'CA', '94043', '650-555-0102', '408-555-0103', 'happysearching@example.com', 'John Snow'),
(19986982, 'Smith Bird Watching', '4000 Finch Circle', 'Building 14', 'Santa Clara', 'CA', '95051', '650-555-0111', '408-555-0112', 'www.sbw@example.com', 'Brian Washington'),
(19974892, 'Wilson Fish Co', '20959 Whalers Ave', 'Building 3', 'San Jose', 'OH', '95128', '650-555-0133', '408-555-0112', 'www.wilsonfish@example.com', 'Matthew Williams'),
(19986196, 'James Deli', '250 Marinade Blvd', 'Suite C', 'Novato', 'IL', '94949', '650-555-0144', '408-555-0112', 'www.jdeli@example.com', 'Phil Jones'),
(19978451, 'All Sushi', '399 San Pablo ave', 'Building 600', 'Cleveland', 'CA', '94530', '650-555-0140', '408-555-0112', 'www.allsuchi.com', 'Teresa Ho'),
(19982461, 'Soft Cables', '9988 Main Upper Street', 'Suite 100', 'Indianapolis', 'IA', '46290', '650-555-0151', '408-555-0112', 'www.cbales@example.com', 'Henry Adams'),
(19984899, 'Mike Recording Industries', '5109 Union Street Road', 'Building 8A', 'San Alfred', 'CA', '94123', '415-555-0166', '408-555-0112', 'www.mikerecording@example.com', 'Mike Black');

INSERT INTO MICRO_MARKET(ZIP_CODE, RADIUS, AREA_LENGTH, AREA_WIDTH) VALUES 
('95051', 255.59, 689.856, 478.479),
('94043', 157.869, 385.821, 147.538),
('85638', 758.648, 328.963, 482.164),
('12347', 475.965, 385.849, 146.937),
('94401', 368.386, 285.848, 173.794),
('95035', 683.396, 472.859, 379.757),
('95117', 755.778, 547.967, 468.858),
('48128', 684.675, 475.854, 408.074),
('48124', 753.765, 487.664, 456.632),
('10095', 1987.854, 975.875, 865.681),
('10096', 1876.766, 955.666, 923.556);

INSERT INTO PRODUCT_CODE(PROD_CODE, DISCOUNT_CODE, DESCRIPTION) VALUES 
('SW', 'M', 'Software'),
('HW', 'H', 'Hardware'),
('FW', 'L', 'Firmware'), 
('BK', 'L', 'Books'),
('CB', 'N', 'Cables'),
('MS', 'N', 'Misc');

INSERT INTO PRODUCT(PRODUCT_ID, MANUFACTURER_ID, PRODUCT_CODE, PURCHASE_COST, QUANTITY_ON_HAND, MARKUP, AVAILABLE, DESCRIPTION) VALUES 
(980001, 19985678, 'SW', 1095.00, 800000, 8.25, 'TRUE', 'Identity Server'),
(980005, 19986982, 'SW', 11500.99, 500, 55.25, 'TRUE', 'Accounting Application'),
(980025, 19974892, 'HW', 2095.99, 3000, 15.75, 'TRUE', '1Ghz Sun Blade Computer'),
(980030, 19986196, 'FW', 59.95, 250, 40.00, 'TRUE', '10Gb Ram'), 
(980032, 19978451, 'FW', 39.95, 50, 25.50, 'TRUE', 'Sound Card'), 
(986710, 19982461, 'CB', 15.98, 400, 30.00, 'TRUE', 'Printer Cable'),
(985510, 19984899, 'HW', 595.00, 800, 5.75, 'TRUE', '24 inch Digital Monitor');

INSERT INTO PURCHASE_ORDER(ORDER_NUM, CUSTOMER_ID, PRODUCT_ID, QUANTITY, SHIPPING_COST, SALES_DATE, SHIPPING_DATE, FREIGHT_COMPANY) VALUES 
(10398001, 1, 980001, 10, 449.00, '2011-05-24', '2011-05-24', 'Poney Express'),
(10398002, 2, 980005, 8, 359.99, '2011-05-24', '2011-05-24', 'Poney Express'),
(10398003, 2, 980025, 25, 275.00, '2011-05-24', '2011-05-24', 'Poney Express'),
(10398004, 3, 980030, 10, 275.00, '2011-05-24', '2011-05-24', 'Poney Express'),
(10398005, 1, 980032, 100, 459.00, '2011-05-24', '2011-05-24', 'Poney Express'),
(10398006, 36, 986710, 60, 55.00, '2011-05-24', '2011-05-24', 'Slow Snail'),
(10398007, 36, 985510, 120, 65.00, '2011-05-24', '2011-05-24', 'Slow Snail');

ALTER TABLE CUSTOMER
	ADD FOREIGN KEY (DISCOUNT_CODE) 
	REFERENCES DISCOUNT_CODE (DISCOUNT_CODE);

ALTER TABLE CUSTOMER
	ADD FOREIGN KEY (ZIP) 
	REFERENCES MICRO_MARKET (ZIP_CODE);

ALTER TABLE PRODUCT
	ADD FOREIGN KEY (MANUFACTURER_ID) 
	REFERENCES MANUFACTURER (MANUFACTURER_ID);

ALTER TABLE PRODUCT
	ADD FOREIGN KEY (PRODUCT_CODE) 
	REFERENCES PRODUCT_CODE (PROD_CODE);


ALTER TABLE PURCHASE_ORDER
	ADD FOREIGN KEY (CUSTOMER_ID) 
	REFERENCES CUSTOMER (CUSTOMER_ID);

ALTER TABLE PURCHASE_ORDER
	ADD FOREIGN KEY (PRODUCT_ID) 
	REFERENCES PRODUCT (PRODUCT_ID);